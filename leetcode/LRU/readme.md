# 缓存

- 阿里上班
  - 手淘、菜鸟、阿里巴巴、钉钉.....
  - 都有用户系统中心，好处是可以集中管理用户

  - 宕机的可能
    - pv/uv 访问压力大
    - 用户访问页面数据量大，如果访问20个页面：pv；如果访问一个页面：uv；明确的登录+ip+mac，可以确定uv
    - 压力在哪？
      - 流量的洪峰
        - 服务器集群系统，随机算法
      - 数据库压力在哪？
        - select 查询，有I/O瓶颈
        - 代码可能运行在内存中，是依靠cpu的计算能力
        - 数据库压力的解决方案：
          - 加缓存
            - id user 万先澄
            - I/O -> memory cache (内存key=>value)，
            - select 真查询 cache set 一下
            - cache  id get
            - 90%的数据库查询就被挡住了
      - 用户模块会访问数据库吗
        - 不一定，如果有缓存，就不会访问数据库
        - 缓存命中，99%是能命中的，cache里面是有 key=>value的
        - 重写了数据库，就需要重新读取数据库
        - cache 也是有容量的，如果容量满了，就需要淘汰一些数据
        - 触发到了内存的上限

## LRU: Least Recently Used 最近最少使用

- 刚进来的用户，频繁进来
- 一个月前来过，可能不会再来了

- redis
  - 参数有一个容量，如果没有用尽，使用set，get；如果用尽了，就需要淘汰一些数据，使用LRU算法