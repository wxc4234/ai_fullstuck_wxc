# DNS解析 受IP协议控制
1. 客户端从本地服务器查找IP
2. 再去根域名服务器查找IP
3. 再去顶级域名服务器查找IP
4. 最后去目标服务器查找IP
5. 找到了将IP缓存进本地的dns缓存区

# TCP
- 可靠性搞
  1. 超时重传 (TCP会备份数据包)
  2. 拥塞控制
  3. 丢包重传 (保证数据的有序性)

- 缺点
  - 速度慢
  - 传输效率低

# UDP
- 不可靠的
  1. 不需要建立连接
  2. 不会给数据包拼接过多的字段
  3. 没有拥塞控制

- 优点
  - 速度快
  - 传输效率高

- 应用场景
  - 直播，视频会议，游戏

# Tcp三次握手
- 客户端给服务端发送建立连接的请求 客户端会进入到syn_send状态
- 服务端向客户端发送确认收到请求的消息 服务端会进入到syn_recv状态
- 客户端接收到同意连接的应答后，再向服务端发送确认消息，客户端和服务端都进入到established状态

- 为什么两次握手不行
  - 为什么一定要三次握手，两次行不行？ 不行，假设客户端给服务端发送了一个建立连接请求A，但是因为网络环境差，这个请求A超时了，那么TCP会启动超时重传机制，再发送一个新的建立连接请求B，服务端接受到B请求后应答，如果此时就完成了建立连接的话，当客户端和服务端通信完成后，便释放了连接，双方都进入Closed状态。假设此时A请求又抵达了服务端，那么服务端会认为客户端又要建立新的链接从而应答该请求并进入ESTABLISHED状态，而此时客户端是Closed状态，那么服务端就会一直等待，造成资源浪费。所以必须三次握手，第三次握手是为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误。

# HTTP数据传输


# 四次挥手断开连接
  - 客户端请求完数据后，向服务端发送断开连接的请求
  - 服务端接收到断开连接的请求后，通知应用层去释放TCP连接，此时就不再接受客户端的请求了
  - 服务端如果还有没发送完的数据，会继续发送数据，发送完后，会向客户端发送断开连接的请求
  - 客户端接收到释放连接的请求后，向服务端发送确认应答，此时客户端和服务端都进入到closed状态

# 浏览器获取到服务端资源后
- 解析HTML资源生成 DOM 树
  - 浏览器接收到的是二进制的字节数据，浏览器会将这些二进制的数据转换成字符串，
  - 对字符串进行词法分析
- 解析CSS资源生成 CSSOM 树
- 合并DOM树和CSSOM树生成render树
  - 只会包含需要显示的节点
  - 根据渲染树来布局页面（回流）
  - GPU绘制，合成图层，显示在屏幕上 （重绘）


# 回流
  修改一个元素的几何属性会导致回流
    1. 修改宽高
    2. 页面初次渲染
    3. 添加或删除可见的DOM元素
    4. 改变窗口大小


# 浏览器的优化策略
  当我们修改一个元素的几何属性导致浏览器需要回流时，浏览器会维护一个渲染队列，将需要回流的操作存入队列中，等到后面没有回流行为或者达到阈值时，会一次性将队列中的行为全部执行。

  offsetxxx，clientxxx，会导致渲染队列强制刷新


# js加载执行会阻塞html的渲染
  1. 在script的标签上添加 async 属性，该js的加载就不会阻塞html的渲染
  2. 在script的标签上添加 defer 属性，该js的加载也不会阻塞html的渲染，但是会在html解析完成后执行


# js操作DOM慢
  1. DOM结构在js引擎中是拥有很庞大的属性
  2. js引擎线程和渲染线程是互斥的，一旦js修改DOM操作过多，线程之间的切换会带来性能消耗